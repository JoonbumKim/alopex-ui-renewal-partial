(function($) {
	/***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
	 * togglebutton
	 **********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
	$.alopex.widget.togglebutton = $.alopex.inherit($.alopex.widget.basebutton, {
		widgetName: 'togglebutton',
		eventHandlers : {
			toggle: {
				event : 'click',
				handler : '_toggleHandler'
			}
		},

		triggerEvent : {},

		properties: {
			checked : false
		},

		getters: [ 'isChecked' ],
		setters : [ 'togglebutton', 'setChecked', 'toggleChecked' ],

		init: function(el) {
			var $el = $(el);
			if($el.attr('data-on')) {
				el.on = $el.attr('data-on');
			} 
			if($el.attr('data-off')) {
				el.off = $el.attr('data-off');
			}
			this.setChecked(el, false);
		},

		_toggleHandler: function(e) {
			$.alopex.widget.togglebutton.toggleChecked(this);
		},

		isChecked : function(el) {
			return this._getProperty(el, 'checked');
		},

		setChecked : function(el, checked) {
			var $el = $(el);
			if (checked) {
				this._setProperty(el, 'checked', true);
				$el.addClass('af-checked Checked');
				$el.text(el.on);
			} else {
				this._setProperty(el, 'checked', false);
				$el.removeClass('af-checked Checked');
				$el.text(el.off);
			}
		},

		toggleChecked : function(el) {
			if (this.isChecked(el)) {
				this.setChecked(el, false);
			} else {
				this.setChecked(el, true);
			}
		}

	});
})(jQuery);